<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="fk7KxxZA62" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>
      什么是异常，其实我也不是很清楚
    </title>
    <!--
    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico" media="screen" />
     -->
    <!-- Bootstrap Core CSS -->
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/static/css/blog.css" rel="stylesheet">
    <link href="/static/css/pygments.css" rel="stylesheet">
    <script src="/static/js/jquery-1.11.0.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media
    queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file://
    -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js">
      </script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js">
      </script>
    <![endif]-->
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?4a7b2b2a1ee8b8686ec632c195bbd833";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
  </head>
  
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top " role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand " href="/" >妙音</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="/categories.html">分 类</a></li>
                <li><a href="/fofa.html">学佛</a></li>
                <li><a href="/tools.html">工具</a></li>
            </ul>
            <form class="navbar-form navbar-right" role="search" action="https://www.google.com/search" method="get">
              <div class="input-group">
                <input type="text" name="q" class="form-control search-query" placeholder="搜索">
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="hidden" name="sitesearch" value="www.zhulinjingshe.cn" />
              </div>
            </form>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
      <div class="content">
          <div class="row">
            <!-- Blog Post -->
<!-- Title -->
<h2>
  什么是异常，其实我也不是很清楚
  <div class="post-date">
        妙音 posted @
        <span class="glyphicon glyphicon-time"></span>
        2014-01-17 17:24
        in coding with tags 
  </div>
</h2>
<!-- Author -->
<hr>

<div class="col-md-10">
    <h1>起因</h1>

<p>平时能较好的处理异常。但在自定义异常时才发现，并不了解异常。对于用的api也不真明白为什么要抛出异常，而不用其它方式。</p>

<p>针对自己的疑惑，觉得有必要好好思考下</p>

<h1>异常机制的产生</h1>

<p>语言发展是从汇编到C再到C++. 在汇编和C语言中都没有异常机制。<br>
它们用的是错误编码机制. 直到C++才出现异常机制。  </p>

<p>什么导致C++中出现异常机制？要回答它，需先了解错误编码机制的存在的缺点。<br>
* 错误信息不全<br>
调用信息不全; 错误种类很多，返回会过于简单.<br>
* 默认可以被忽略<br>
默认可以不用检查返回的错误编码，很容易使程序处在不正常状态.<br>
* 不能跨作用域传送<br>
只能一层层的向上传送，每层都有一堆检查错误的代码，会掩盖正常处理。  </p>

<p>编码机制是为解决程序错误这个需求而生。在错误发生时最重要的是:<br>
错误内容是什么？<br>
在哪儿出错了？<br>
为什么出错？<br>
编码机制存在着缺点，不能很好解决这几个需求。  </p>

<p>异常机制能完善的解决了这些问题. 所以后来语言中都加入了异常机制。  </p>

<p>异常机制也就了两个重要特点:<br>
* 沿着调用堆栈向上传递错误<br>
* 不可忽略<br>
前者可获得完整的调用信息，方便定位错误地点. 也可将错误处理代码分离出来。<br>
后者明确拒绝不健康运行状态，是程序正确性的关键。  </p>

<h1>对异常的疑惑</h1>

<p>一个简单的python异常  </p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">&gt;&gt;&gt; <span class="nv">a</span> <span class="o">=</span> <span class="o">{</span><span class="s2">&quot;a&quot;</span>: 1, <span class="s2">&quot;b&quot;</span>: 2<span class="o">}</span>
&gt;&gt;&gt; a.pop<span class="o">(</span>c<span class="o">)</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;&lt;stdin&gt;&quot;</span>, line 1, in &lt;module&gt;
NameError: name <span class="s1">&#39;c&#39;</span> is not defined</code></pre></div>

<p>对于它我有很多疑问:
1. 为什么抛异常？返回特殊标记不行吗.
2. 什么是异常？为什么它会被定义为异常.</p>

<p>回答第一个问题
异常的特点是就是&quot;不可忽略&quot;，上面的pop没有任何值适合作为标记，它只能抛异常. 如果忽略了，可能会让程序处在不健康状态。</p>

<p>回答第二个问题<br>
异常是判断词，与它对的应是正常。<br>
那么什么是正常？回答它也就可回答第二个问题了.<br>
<strong>异常与正常其实隐藏着一个判断, 隐藏着一个判断标准。</strong>  </p>

<p><strong>那么谁在判断，谁在制定标准。答案是你。</strong><br>
<strong>你在决定什么是异常，什么时候该抛异常，抛什么类型的异常。</strong><br>
例子中就是python作者在背后做了思考/定义，决定它应该作为异常。  </p>

<h1>如何使用异常</h1>

<p>当定义好什么是正常，知道哪些是不正常而且不可忽略时，就是使用异常的时候。为防止不健康运行状态. 而且不可忽略.    </p>

<p>值得注意的是：通常是没法考虑全面的，会有漏掉的情况，应以保守的方法处理，对未考虑到的情况全部作为异常处理，再分辨，逐步完善。    </p>

<p>异常的重要性<br>
它是软件好坏的重要标志，任何在这上面处理不好的软件，无不是充满了坑。  </p>

    <br/>
    <div style="margin-top:10px;margin-bottom:10px">
      
      <span class="next">
        上篇：
        <a href="/linux/2014/01/16/proxychains.html">
          在用proxychains时, ping用不了怎么办
        </a>
      </span>
       
      
      <span class="prev">
        下篇：
        <a href="/ssh/2014/01/21/ssh.html">
          ssh在远程执行多个命令
        </a>
      </span>
      
    </div>
    <hr>
    <!-- Blog Comments -->
    <div class="media">
        <!-- UY BEGIN -->
        <div id="uyan_frame"></div>
        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1965284"></script>
        <!-- UY END -->
    </div>
</div>

          </div>
      </div>
      <!-- Footer -->
      <footer>
        <div class="row">
          <div class="col-lg-12">
            <p align="center"></p>
          </div>
        </div>
      </footer>
    </div>
    <script src="/static/js/blog.js"></script>
  </body>
</html>

