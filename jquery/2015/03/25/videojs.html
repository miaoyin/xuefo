<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="fk7KxxZA62" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>
      video.js视频播放插件初试
    </title>
    <!--
    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico" media="screen" />
     -->
    <!-- Bootstrap Core CSS -->
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/static/css/blog.css" rel="stylesheet">
    <link href="/static/css/pygments.css" rel="stylesheet">
    <script src="/static/js/jquery-1.11.0.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media
    queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file://
    -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js">
      </script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js">
      </script>
    <![endif]-->
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?4a7b2b2a1ee8b8686ec632c195bbd833";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
  </head>
  
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top " role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand " href="/" >妙音</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="/categories.html">分 类</a></li>
                <li><a href="/fofa.html">学佛</a></li>
                <li><a href="/tools.html">工具</a></li>
            </ul>
            <form class="navbar-form navbar-right" role="search" action="https://www.google.com/search" method="get">
              <div class="input-group">
                <input type="text" name="q" class="form-control search-query" placeholder="搜索">
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="hidden" name="sitesearch" value="www.zhulinjingshe.cn" />
              </div>
            </form>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
      <div class="content">
          <div class="row">
            <!-- Blog Post -->
<!-- Title -->
<h2>
  video.js视频播放插件初试
  <div class="post-date">
        妙音 posted @
        <span class="glyphicon glyphicon-time"></span>
        2015-03-25 10:41
        in jquery with tags 插件
  </div>
</h2>
<!-- Author -->
<hr>

<div class="col-md-10">
    <p>最近在弄视频服务器，首先找播放插件。当看到video.js，非常清爽，并且它支持flv、mp4、webm、ogv播放格式，很喜欢，所以选它.</p>

<h3>简单示例</h3>

<ul>
<li>video.js官网</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">http://www.videojs.com/</code></pre></div>

<ul>
<li>下载</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">wget http://www.videojs.com/downloads/video-js-4.12.5.zip</code></pre></div>

<ul>
<li>解压</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">unzip video-js-4.12.5.zip</code></pre></div>

<ul>
<li>简易web服务器<br>
进入video-js目录，使用python，运行一个简易服务器</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">➜  video-js  python -m SimpleHTTPServer
Serving HTTP on 0.0.0.0 port 8000 ...</code></pre></div>

<p>在浏览器访问http://localhost:8000/demo.html 即可看到demo</p>

<h3>demo.html文件介绍</h3>

<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Video.js | HTML5 Video Player&lt;/title&gt;

  &lt;!-- Chang URLs to wherever Video.js files will be hosted --&gt;
  &lt;link href=&quot;video-js.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
  &lt;!-- video.js must be in the &lt;head&gt; for older IEs to work. --&gt;
  &lt;script src=&quot;video.js&quot;&gt;&lt;/script&gt;

  &lt;!-- Unless using the CDN hosted version, update the URL to the Flash SWF --&gt;
  &lt;script&gt;
    &lt;!--支持播放flv --&gt;
    videojs.options.flash.swf = &quot;video-js.swf&quot;;
  &lt;/script&gt;


&lt;/head&gt;
&lt;body&gt;
  &lt;!-- poster封面 preload预加载 --&gt;
  &lt;video id=&quot;example_video_1&quot; class=&quot;video-js vjs-default-skin&quot; controls preload=&quot;none&quot; width=&quot;640&quot; height=&quot;264&quot;
      poster=&quot;http://video-js.zencoder.com/oceans-clip.png&quot;
      data-setup=&quot;{}&quot;&gt;
    &lt;!-- 三种播放格式--&gt;
    &lt;source src=&quot;http://video-js.zencoder.com/oceans-clip.mp4&quot; type=&#39;video/mp4&#39; /&gt;
    &lt;source src=&quot;http://video-js.zencoder.com/oceans-clip.webm&quot; type=&#39;video/webm&#39; /&gt;
    &lt;source src=&quot;http://video-js.zencoder.com/oceans-clip.ogv&quot; type=&#39;video/ogg&#39; /&gt;
    &lt;!-- 字幕 --&gt;
    &lt;track kind=&quot;captions&quot; src=&quot;demo.captions.vtt&quot; srclang=&quot;en&quot; label=&quot;English&quot;&gt;&lt;/track&gt;&lt;!-- Tracks need an ending tag thanks to IE9 --&gt;
    &lt;track kind=&quot;subtitles&quot; src=&quot;demo.captions.vtt&quot; srclang=&quot;en&quot; label=&quot;English&quot;&gt;&lt;/track&gt;&lt;!-- Tracks need an ending tag thanks to IE9 --&gt;
    &lt;p class=&quot;vjs-no-js&quot;&gt;To view this video please enable JavaScript, and consider upgrading to a web browser that &lt;a href=&quot;http://videojs.com/html5-video-support/&quot; target=&quot;_blank&quot;&gt;supports HTML5 video&lt;/a&gt;&lt;/p&gt;
  &lt;/video&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre></div>

<p>从上可看出，支持四种播放格式flv、mp4、webm、ogv</p>

<h3>测试自己的视频</h3>

<ul>
<li>转换视频
找个mp4视频，然后转换为flv、ogv、webm、swf格式. </li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">➜  video-js  ls -sh video
总用量 303M
 25M demo.flv   96M demo.ogv   40M demo.webm
120M demo.mp4   25M demo.swf</code></pre></div>

<ul>
<li>修改demo.html文件</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;source src=&quot;/video/demo.flv&quot; type=&#39;video/x-flv&#39; /&gt;
&lt;!--
&lt;source src=&quot;/video/demo.ogv&quot; type=&#39;video/ogg&#39; /&gt;
&lt;source src=&quot;/video/demo.mp4&quot; type=&#39;video/mp4&#39; /&gt;
&lt;source src=&quot;/video/demo.webm&quot; type=&#39;video/webm&#39; /&gt;
--&gt;</code></pre></div>

<ul>
<li>播放效果<br>
改成自己的视频后，发现播放非常慢. 由于视频在本地，这种情况不正常. 最后发现由于视频文件放在web服务器中，web服务器处理静态数据很慢.</li>
</ul>

<h3>nginx静态资源服务器</h3>

<p>有没有更快的访问方式？想到nginx处理静态数据非常快.   </p>

<ul>
<li><p>安装nginx<br>
nginx的安装就不说了</p></li>
<li><p>修改配置</p></li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">location / {
    root   /home/wyq/workspace/video-js/;
    #root   html;
    index  index.html index.htm;
}</code></pre></div>

<p>启动nginx之后，通过它访问demo.html，发现此时播放视频非常流畅.</p>

<ul>
<li> 限速<br>
假如视频把网页速度占了，怎么限制视频速度？在可以在nginx中添加如下参数.</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text">location / {
    root   /home/wyq/workspace/video-js/;
    limit_rate_after 5m; #下载5M以后开始限速
    limit_rate 512k;     #每个链接速度限制为512K
    #root   html;
    index  index.html index.htm;
}</code></pre></div>

<p>另外找资料发现，网上说播放视频需要http<em>flv</em>module模块才支持拖动播放flv视频. 按照上面方法，没有安装flv模块，也可以拖动播放。想了下原因，可能我用的是nginx1.6，比较新，不需要安装flv模块，也可以拖动播放. </p>

    <br/>
    <div style="margin-top:10px;margin-bottom:10px">
      
      <span class="next">
        上篇：
        <a href="/jekyll/2015/03/24/jekyll.html">
          为jekyll站点生成网站地图
        </a>
      </span>
       
      
      <span class="prev">
        下篇：
        <a href="/css/2015/03/26/css.html">
          异步加载css
        </a>
      </span>
      
    </div>
    <hr>
    <!-- Blog Comments -->
    <div class="media">
        <!-- UY BEGIN -->
        <div id="uyan_frame"></div>
        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1965284"></script>
        <!-- UY END -->
    </div>
</div>

          </div>
      </div>
      <!-- Footer -->
      <footer>
        <div class="row">
          <div class="col-lg-12">
            <p align="center"></p>
          </div>
        </div>
      </footer>
    </div>
    <script src="/static/js/blog.js"></script>
  </body>
</html>

